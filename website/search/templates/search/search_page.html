{% extends "common/content_page.html" %}

{% load static sri %}

{% block post_content %}
  <section class="container search-controls">
    <div class="field">
      <p class="control has-icons-left has-icons-right">
        <input type="search" class="input" name="q" placeholder="Search" hx-get="{{ search_url }}" hx-trigger="keyup changed delay:200ms, search{% if search_query %}, load{% endif %}" hx-target="#search-results" autocomplete="off" value="{{ search_query }}" hx-indicator="#search-indicator" />
        <span class="icon is-small is-left">
          <i class="fas fa-search"></i>
        </span>
        <span class="icon is-small is-right htmx-indicator" id="search-indicator">
          <i class="fas fa-circle-notch"></i>
        </span>
      </p>
    </div>
  </section>

  <section class="container">
    <p id="result-count"></p>

    <div id="search-results">
      {% if not search_query %}
        {% include "search/enter-search-term.html" %}
      {% endif %}
    </div>

    <div class="htmx-indicator" id="search-page-indicator">
      <i class="fas fa-circle-notch"></i>
    </div>
  </section>
{% endblock %}
